<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>MCP Setup ‚Äî NanoAnalytics</title>
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    :root {
      --bg: #f7f8fa; --surface: #fff; --border: #e5e7eb;
      --text: #111827; --muted: #6b7280; --accent: #6366f1;
      --code-bg: #1e1e2e; --code-fg: #cdd6f4;
      --radius: 10px; --shadow: 0 1px 6px rgba(0,0,0,.07);
    }
    body { font-family: system-ui, -apple-system, sans-serif; background: var(--bg); color: var(--text); font-size: 14px; line-height: 1.6; }
    .page { max-width: 860px; margin: 0 auto; padding: 2.5rem 1.5rem; }
    h1 { font-size: 1.6rem; font-weight: 800; margin-bottom: .25rem; display: flex; align-items: center; gap: 8px; }
    .subtitle { color: var(--muted); margin-bottom: 2.5rem; }
    h2 { font-size: 1rem; font-weight: 700; margin: 2rem 0 .5rem; }
    h3 { font-size: .9rem; font-weight: 700; color: var(--muted); margin: 1.5rem 0 .5rem; }
    p  { color: var(--muted); margin-bottom: .75rem; font-size: .9rem; }
    .code-block {
      position: relative;
      background: var(--code-bg);
      color: var(--code-fg);
      border-radius: var(--radius);
      padding: 1.25rem 1rem;
      font-family: 'SF Mono', 'Fira Code', monospace;
      font-size: .82rem;
      line-height: 1.65;
      overflow-x: auto;
      margin-bottom: .75rem;
      white-space: pre;
    }
    .copy-btn {
      position: absolute;
      top: .6rem;
      right: .6rem;
      padding: .3rem .65rem;
      background: rgba(255,255,255,.12);
      border: none;
      border-radius: 5px;
      color: #fff;
      font-size: .75rem;
      cursor: pointer;
      transition: background .15s;
    }
    .copy-btn:hover { background: rgba(255,255,255,.22); }
    .copy-btn.copied { background: #22c55e; }
    .note {
      background: #eef2ff;
      border-left: 3px solid var(--accent);
      padding: .75rem 1rem;
      border-radius: 0 var(--radius) var(--radius) 0;
      font-size: .85rem;
      color: #3730a3;
      margin-bottom: 1rem;
    }
    .path-note { font-size: .8rem; color: var(--muted); margin-top: -.25rem; margin-bottom: .5rem; }
    .nav { display: flex; gap: 1rem; flex-wrap: wrap; margin-bottom: 2rem; }
    .nav a {
      padding: .4rem .85rem;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 6px;
      color: var(--accent);
      text-decoration: none;
      font-size: .85rem;
      font-weight: 600;
    }
    .nav a:hover { background: var(--accent); color: #fff; border-color: var(--accent); }
    hr { border: none; border-top: 1px solid var(--border); margin: 2rem 0; }
  </style>
</head>
<body>
<div class="page">
  <h1>ü§ñ MCP Setup</h1>
  <p class="subtitle">Connect your NanoAnalytics instance to any AI agent ‚Äî Claude, Cursor, or any OpenAPI-compatible client.</p>

  <div class="nav">
    <a href="/dashboard">‚Üê Dashboard</a>
    <a href="/docs">API Docs (Swagger)</a>
    <a href="/openapi.json">openapi.json</a>
  </div>

  <div class="note">
    Your instance URL: <strong>{{ base_url }}</strong><br>
    Replace <code>&lt;YOUR_API_TOKEN&gt;</code> with the <code>API_TOKEN</code> environment variable from your hosting dashboard.
  </div>

  <!-- ‚îÄ‚îÄ Claude Desktop ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
  <h2>Claude Desktop</h2>
  <p>Edit your Claude Desktop configuration file and add the server block below.</p>
  <p>‚ö†Ô∏è <strong>Prerequisite:</strong> <a href="https://nodejs.org" target="_blank" style="color:var(--accent)">Node.js</a> must be installed on your computer. The config uses <code>npx</code> to auto-download the MCP bridge ‚Äî no other install needed.</p>

  <h3>Config file location</h3>
  <div class="code-block" style="font-size:.78rem">
macOS:   ~/Library/Application Support/Claude/claude_desktop_config.json
Windows: %APPDATA%\Claude\claude_desktop_config.json</div>

  <h3>Add to <code>claude_desktop_config.json</code></h3>
  <div class="code-block" id="claude-cfg"><button class="copy-btn" onclick="copyBlock('claude-cfg')">Copy</button>{
  "mcpServers": {
    "nano-analytics": {
      "command": "npx",
      "args": ["-y", "@ivotoby/openapi-mcp-server"],
      "env": {
        "API_BASE_URL": "{{ base_url }}",
        "OPENAPI_SPEC_PATH": "{{ base_url }}/openapi.json",
        "API_HEADERS": "Authorization:Bearer &lt;YOUR_API_TOKEN&gt;"
      }
    }
  }
}</div>

  <p>Save the file and restart Claude Desktop. You can then ask:</p>
  <div class="code-block" style="color:#a6e3a1">"What were my top pages last week on mysite.com?"
"Is mobile traffic growing this month?"
"Show me the daily traffic trend for example.com"</div>

  <hr>

  <!-- ‚îÄ‚îÄ Cursor ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
  <h2>Cursor</h2>
  <p>Add NanoAnalytics to a project by creating a <code>.cursor/mcp.json</code> file in your project root. Or add it globally via <strong>Settings ‚Üí MCP ‚Üí Add Server</strong>.</p>

  <h3>Project file: <code>.cursor/mcp.json</code></h3>
  <p class="path-note">Scoping to a project means the agent has analytics context only when working in that repo.</p>
  <div class="code-block" id="cursor-cfg"><button class="copy-btn" onclick="copyBlock('cursor-cfg')">Copy</button>{
  "mcpServers": {
    "nano-analytics": {
      "url": "{{ base_url }}/openapi.json",
      "headers": {
        "Authorization": "Bearer &lt;YOUR_API_TOKEN&gt;"
      }
    }
  }
}</div>

  <hr>

  <!-- ‚îÄ‚îÄ Generic OpenAPI client ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
  <h2>Any OpenAPI-compatible client</h2>
  <p>Windsurf, GitHub Copilot, LangChain tools, GPT Actions, and any other client that accepts an OpenAPI 3.1 spec URL.</p>

  <div class="code-block" id="generic-cfg"><button class="copy-btn" onclick="copyBlock('generic-cfg')">Copy</button>Spec URL : {{ base_url }}/openapi.json
Auth type: Bearer Token
Token    : &lt;YOUR_API_TOKEN&gt;</div>

  <hr>

  <!-- ‚îÄ‚îÄ Example agent calls ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
  <h2>Example function calls an agent can make</h2>

  <h3>Get total views for the past 30 days</h3>
  <div class="code-block" style="color:#a6e3a1">GET {{ base_url }}/api/pageviews
  ?site=mysite.com
  &amp;start=1737676800
  &amp;end=1740355200

‚Üí { "views": 4821, "sessions": 3102 }</div>

  <h3>Get top 5 pages</h3>
  <div class="code-block" style="color:#a6e3a1">GET {{ base_url }}/api/pages
  ?site=mysite.com
  &amp;limit=5

‚Üí [
    { "path": "/",        "views": 2103 },
    { "path": "/pricing", "views": 841  },
    ...
  ]</div>

  <h3>Get daily traffic trend</h3>
  <div class="code-block" style="color:#a6e3a1">GET {{ base_url }}/api/timeseries?site=mysite.com

‚Üí [
    { "day": "2026-01-15", "views": 312 },
    { "day": "2026-01-16", "views": 289 },
    ...
  ]</div>

</div>

<script>
function copyBlock(id) {
  const el  = document.getElementById(id);
  const btn = el.querySelector('.copy-btn');
  // Extract text without the button text
  const clone = el.cloneNode(true);
  clone.querySelector('.copy-btn').remove();
  const text = clone.innerText
    .replace(/&lt;/g, '<').replace(/&gt;/g, '>').replace(/&amp;/g, '&');
  navigator.clipboard.writeText(text.trim()).then(() => {
    btn.textContent = 'Copied!';
    btn.classList.add('copied');
    setTimeout(() => { btn.textContent = 'Copy'; btn.classList.remove('copied'); }, 1800);
  });
}
</script>
</body>
</html>
